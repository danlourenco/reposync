#!/bin/sh

# Exit on error
set -e

echo "🔍 Running pre-push checks..."
echo ""

# Change to nsync package directory
cd packages/nsync

echo "📝 Running linter..."
npm run lint --silent || {
    echo "❌ Linting failed! Please fix the errors before pushing."
    exit 1
}
echo "✅ Linting passed"
echo ""

echo "🧪 Running unit tests..."
npm test -- --run --reporter=dot || {
    echo "❌ Tests failed! Please fix the failing tests before pushing."
    exit 1
}
echo "✅ All tests passed"
echo ""

echo "🎉 Pre-push checks passed! Ready to push."